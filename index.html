<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Productos Tolerados - Descartes</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.12.0/toastify.min.css" rel="stylesheet">
    <!-- El resto de tu CSS se mantiene igual -->
</head>
<body>
    <!-- Tu HTML se mantiene igual hasta el script -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.12.0/toastify.js"></script>
    <script>
        // Configuración
        const CONFIG = {
            scriptURL: 'https://script.google.com/a/macros/pieriplast.com/s/AKfycbwpqKgR77QHvdJk_7fS9DM5F-1EYzWFTcO6KsBo3iWWPa7HUumNnaIoXd56UBUJUIJhXQ/exec', // Asegúrate de que termine en /exec
            autoIncrementPrefix: 'DESC-'
        };

        // El resto de las funciones se mantienen igual, solo modificamos enviarDatos:
        async function enviarDatos() {
            const submitButton = document.getElementById('submitButton');
            const buttonText = submitButton.querySelector('.button-text');
            
            try {
                submitButton.disabled = true;
                submitButton.classList.add('loading');
                buttonText.textContent = 'Guardando...';

                const formData = getFormData();
                
                const response = await fetch(CONFIG.scriptURL, {
                    method: 'POST',
                    mode: 'no-cors', // Importante para CORS
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                // Como estamos usando no-cors, manejamos la respuesta de manera diferente
                showNotification('¡Datos enviados correctamente!', 'success');
                limpiarFormulario();
                
            } catch (error) {
                console.error('Error:', error);
                showNotification('Error al enviar los datos. Intente nuevamente.', 'error');
            } finally {
                submitButton.disabled = false;
                submitButton.classList.remove('loading');
                buttonText.textContent = 'Guardar';
            }
        }

        // El resto de tu código JavaScript se mantiene igual
    </script>
</body>
</html>
